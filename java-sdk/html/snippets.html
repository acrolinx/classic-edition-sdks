<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.6 at 2016-10-18 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Acrolinx Java SDK &#x2013; </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20161018" />
    <meta http-equiv="Content-Language" content="en" />

        </head>
  <body class="composite">
    <div id="banner">
                          <div id="bannerRight">
                                                <img src="images/acrolinx_logo.png" alt="$alt" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">


                <div class="xleft">
        <span id="publishDate">Last Published: 2016-10-18</span>
                  &nbsp;| <span id="projectVersion">Version: 3.5.1</span>
                      </div>
            <div class="xright">
              <a href="https://github.com/acrolinx/classic-edition-sdks" class="externalLink" title="Acrolinx Classic SDKs on GitHub">Acrolinx Classic SDKs on GitHub</a>
              <a href="http://www.acrolinx.com" class="externalLink" title="Acrolinx website">Acrolinx website</a>
            |
                        <a href="mailto:sdk-support@acrolinx.com" class="externalLink" title="Contact Acrolinx Java SDK Support">Contact Acrolinx Java SDK Support</a>


      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>

        <div class="section">
<h2><a name="Welcome_to_the_Acrolinx_Java_SDK_snippets_page"></a>Welcome to the Acrolinx Java SDK snippets page</h2>
<p>The examples on this page should help you to get started with the Acrolinx Java SDK.</p>
<div class="section">
<h3><a name="Setup_Logging"></a>Setup Logging</h3>
<ul>
<li>When working with these snippets you probably want to have logging activated.<br />You can set the Acrolinx Java SDK to use log4j as follows:
<div class="source">
<pre>        AcrolinxFactoryInstantiator.setLoggerFactory(new LoggerFactory()
        {
            @Override
            public Log getLogger(final Class&lt;?&gt; clazz)
            {
                return new Log4JLogger(Logger.getLogger(clazz));
            }
        });

        /*
         * You also can use the shortcut:
         */

        AcrolinxFactoryInstantiator.setLoggerFactoryWithLog4jLogging();

</pre></div>
<p>Make sure you make that as early as possible. You can accomplish the same by setting a Java VM property: -Diqfactory.loggerfactory=com.acrolinx.client.factory.Log4jLoggerFactory</p></li></ul></div>
<div class="section">
<h3><a name="Basic_Workflow_Example"></a>Basic Workflow Example</h3>
<ul>
<li>This is the most basic way of doing a check.<br />First prepare you environment. Create your ClientInformation, an User and the ClientSignature:
<div class="source">
<pre>        // get the acrolinxFactory as bridge to implementation classes
        final AcrolinxFactory factory = AcrolinxFactoryInstantiator.get();

        // create client information and user

        /*
         * You get a client signature from your Acrolinx project consultant. The signature must be
         * included in your server license.
         */
        final ClientInformation clientInformation = factory.clientInformations().create().withClientName(
                &quot;MyClient&quot;).withVersion(&quot;1.3&quot;).withBuildNumber(721).withHostName(&quot;TheHostname&quot;).withClientSignature(
                        &quot;QmVpc3BpZWxTaWduYXR1cg==&quot;).build();
        final User user = Users.newUserWithPassword(&quot;test22&quot;, &quot;test&quot;);

        factory.applicationStores();
        /*
         * Create an instance of a ApplicationStore implementation to store the AuthToken returned
         * by the server. You can create your own implementation of the ApplicationStore interface
         * or use a FileApplicationStore implementation as follows.
         */
        final ApplicationStore applicationStore = ApplicationStores.fromFile(new File(&quot;store.dat&quot;));

        final AcrolinxClient acrolinxClient = factory.createClient(clientInformation, applicationStore);
        final ServerEndpoint serverAccess = acrolinxClient.lookupServer(
                factory.serverEndpointConfigurations().create(&quot;localhost:8031&quot;).build());
        final ServerConnection serverConnection = serverAccess.connect(user);
</pre></div>
<p>The ClientInformation describes your client when it is registered on the server. The values are usually constants. The server uses this information, e.g., when displaying users' checking information in the dashboard.</p></li>
<li>Now is a good time to ask the IQServer what its capabilities are:
<div class="source">
<pre>        try {
            for (final LanguageCapabilities lc : serverConnection.getCheckAdapter().getCapabilities().getLanguageCapabilities()) {
                System.out.println(lc.getLanguage() + &quot; --&gt; &quot; + lc.getRuleSetCapabilities());
            }
        } catch (final NoCoreServerRunningException e) {
            /*
             * This exception informs that there is no core server running under the given server
             * address. Because this is a RuntimeException catching is optional.
             */
            System.out.print(e.getMessage());
            return;
        }

        // or get a specific lc (this is may be null)
        final LanguageCapabilities capabilityEn = serverConnection.getCheckAdapter().getCapabilities().getLanguageCapability(
                Languages.english());
</pre></div></li>
<li>You can ask the core server if the admitted term state is activated. You can also ask for the customized name of the admitted term state:
<div class="source">
<pre>Logger.getRootLogger().info(&quot;Is Custom Admitted Term State support? &quot;
        + serverConnection.getCheckAdapter().getCapabilities().isCustomAdmittedTermStateSupported());
Logger.getRootLogger().info(&quot;Name of admitted term state is: &quot; + capabilityEn.getNameOfAdmittedTermState());
</pre></div>
<ul>
<li>If you want to restrict the GUI in respect of certain privileges you can use the authenticate privileges method:
<div class="source">
<pre>        // to verify user and password call authenticate privilege without null as privilege
        System.out.println(
                &quot;Are the credentials for userA are valid? &quot; + serverConnection.getPrivileges().hasPrivilege(null));

        // to check if a user has a certain privilege
        System.out.println(
                &quot;Is userA allowed to run term harvesting? &quot; + serverConnection.getPrivileges().hasRunTermHarvesting());

</pre></div></li></ul>
<ul>
<li>Now you can create your check settings to specify what you want to check:
<div class="source">
<pre>        // create check settings

        final Set&lt;RuleSetCapabilities&gt; ruleSetCapabilitiesSet = capabilityEn.getRuleSetCapabilities();

        /*
         * just take the fist - you should select a specific depending on your business case and
         * server installation capabilities
         */
        final RuleSetCapabilities selectedRuleSetCapabilities = ruleSetCapabilitiesSet.iterator().next();

        final CheckSettings checkSettings = factory.checkSettings().create(Languages.english(),
                selectedRuleSetCapabilities.getRuleSet()).withStyleChecking(
                        selectedRuleSetCapabilities.isStyleCheckingAvailable()).withSEOChecking(
                                selectedRuleSetCapabilities.isSEOCheckingAvailable()).build();

        final DocumentCheckSettings documentCheckSettings = factory.documentCheckSettings().create().withKeyword(
                &quot;test&quot;).build();
</pre></div></li></ul></li>
<li>Finally do the check:
<div class="source">
<pre>        // create a simple string document to check
        final Document document = factory.documents().createStringDocument(
                &quot;Passive was avoided by the test.&quot;).withFileName(Filenames.unknownFilename()).withAuthor(
                        Authors.unknownAuthor()).withFileFormat(FileFormats.unknownFileFormat()).build();

        // run the check
        final CheckAdapter checkAdapter = serverConnection.getCheckAdapter();

        final CheckInformation checkInformation = factory.checkInformations().create(document).build();

        /*
         * In case you experience problems with accessing the checking report, set the transfer
         * method to WEB_SERVICE. This change causes the SDK to retrieve the report via the web
         * service instead of a download via HTTP.
         */
        final CheckResult result = checkAdapter.check(checkSettings, checkInformation,
                documentCheckSettings).getCheckResult(CheckResultTransferMethod.HTTP);
</pre></div></li>
<li>If you want to inform your user about the progress of a long runnning check, you may want to use the ProgressMonitor:
<div class="source">
<pre>        // create a simple progress monitor
        final ProgressMonitor monitor = new ProgressMonitor()
        {
            @Override
            public void tick(final int percent)
            {
                System.out.println(MessageFormat.format(&quot;Check progress: {0} percent&quot;, percent));
            }

            @Override
            public boolean isCanceled()
            {
                return false;
            }
        };
        // run the check
        check = checkAdapter.check(checkSettings, checkInformation, documentCheckSettings);
        final CheckResult checkResult = check.getCheckResult(monitor, CheckResultTransferMethod.HTTP);
</pre></div></li>
<li>It is also possible to cancel a long running check:
<div class="source">
<pre>
        // check() is not blocking, only getCheckResult() blocks until the check is finished
        Check check = checkAdapter.check(checkSettings, checkInformation, documentCheckSettings);
        // cancel the check
        check.cancel();

</pre></div></li>
<li>To get an idea what you can do with the check result, take a look on this snippet:
<div class="source">
<pre>        System.out.println(
                &quot;Number of checked words was: &quot; + checkResult.getReport().getCheckingScope().getCheckedWordCount());
        System.out.println(&quot;The document score was: &quot; + checkResult.getReport().getCheckingScore()
                + &quot; which is status: &quot; + checkResult.getReport().getDocumentStatus());

        System.out.println(&quot;number of flags: &quot; + checkResult.getReport().getFlags().size());

        for (final Flag flag : checkResult.getReport().getFlags()) {
            System.out.println(&quot;Found flag with description : &quot; + flag.getDescription());
        }

        // For logging or prototyping purposes use report.toString() to get a textual representation
        System.out.println(checkResult.getReport());

</pre></div></li>
<li>When you are done with ALL checks (for example, when closing your client) it is very important that you disconnect from server:
<div class="source">
<pre>// close the session
serverConnection.disconnect();
</pre></div>
<p>If you forget this call, your session will stay open until it is timing out on the server. This can cause a licensing exception &quot;Your license is already in use&quot; when you connect later on with the same user.</p></li></ul></div>
<div class="section">
<h3><a name="Context_Segmentation_Definition_Snippets"></a>Context Segmentation Definition Snippets</h3>
<p>Here is an example how to create an xml csd definition manually:</p>
<div class="source">
<pre>        final String content = &quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot; ?&gt;&quot;
                + &quot;&lt;holy&gt;&lt;grail&gt;The foxx jumped over &lt;ignore&gt;Ignore me!&lt;/ignore&gt; the &lt;notignore&gt;hill&lt;/notignore&gt;.&lt;/grail&gt;&lt;/holy&gt;&quot;;

        final SegmentationDefinitionBuilder sdBuilder = acrolinxFactory.documents().createSegmentationDefinitionBuilder(
                InclusionMode.INCLUSION);

        sdBuilder.addInclusionMode(&quot;ignore&quot;, InclusionMode.EXCLUSION);
        final SegmentationDefinition sd = sdBuilder.build();

        final ByteArrayInputStream xmlStream = new ByteArrayInputStream(content.getBytes(Charset.forName(&quot;UTF-8&quot;)));
        final Document doc = acrolinxFactory.documents().createXmlDocumentFromStream(xmlStream, sd).withFileName(
                Filenames.unknownFilename()).withAuthor(Authors.unknownAuthor()).build();

        assertEquals(&quot;The foxx jumped over  the hill.&quot;, doc.getText());
</pre></div>
<p>You can also load the csd from file:</p>
<div class="source">
<pre>        final SegmentationDefinition sd = acrolinxFactory.documents().createSegmentationDefinitionFromFile(file);
        final Document doc = acrolinxFactory.documents().createXmlDocumentFromStream(xmlStream, sd).withFileName(
                Filenames.unknownFilename()).withAuthor(Authors.unknownAuthor()).build();

        assertEquals(&quot;The foxx jumped over  the hill.&quot;, doc.getText());
</pre></div></div>
<div class="section">
<h3><a name="Server_Capabilities"></a>Server Capabilities</h3>
<p>This shows how to retrieve the languages, rule sets and checking options from a server:</p>
<div class="source">
<pre>        final ServerCapabilities serverCapabilities = serverConnection.getCheckAdapter().getCapabilities();

        for (final LanguageCapabilities languageCapabilities : serverCapabilities.getLanguageCapabilities()) {
            System.out.println(&quot;Language &quot; + languageCapabilities.getLanguage().getLanguageCode());
            for (final RuleSetCapabilities ruleSetCapabilities : languageCapabilities.getRuleSetCapabilities()) {
                System.out.println(&quot;   Ruleset &quot; + ruleSetCapabilities.getRuleSet().getName());
                if (!ruleSetCapabilities.getAvailableTermSets().isEmpty()) {
                    final StringBuilder termSets = new StringBuilder();
                    for (final TermSet termSet : ruleSetCapabilities.getAvailableTermSets()) {
                        termSets.append(termSet.getName() + &quot; &quot;);
                    }
                    System.out.println(&quot;      has term sets &quot; + termSets);
                }
                final StringBuilder options = new StringBuilder();
                if (ruleSetCapabilities.isSpellCheckingAvailable()) {
                    options.append(&quot;spelling &quot;);
                }
                if (ruleSetCapabilities.isGrammarCheckingAvailable()) {
                    options.append(&quot;grammar &quot;);
                }
                if (ruleSetCapabilities.isStyleCheckingAvailable()) {
                    options.append(&quot;style &quot;);
                }
                if (ruleSetCapabilities.isReuseCheckingAvailable()) {
                    options.append(&quot;reuse &quot;);
                }
                if (ruleSetCapabilities.isTermHarvestingAvailable()) {
                    options.append(&quot;term_harvesting &quot;);
                }
                if (options.length() &gt; 0) {
                    System.out.println(&quot;      allows &quot; + options);
                }
            }
        }
</pre></div></div>
<div class="section">
<h3><a name="Server-Side_XML_Extraction"></a>Server-Side XML Extraction</h3>
<p>Short example of how to activate server-side XML extraction and how to retrieve the annotated XML the server returns:</p>
<div class="source">
<pre>        final Document document = factory.documents().createStringDocument(&quot;&lt;p&gt;This is a sentence.&lt;/p&gt;&quot;).withFileName(
                Filenames.unknownFilename()).withAuthor(Authors.unknownAuthor()).withFileFormat(
                        FileFormats.applicationXml()).build();
        final CheckSettingsBuilder checkSettingsBuilder = factory.checkSettings().create(language, ruleSet);

        final CheckSettings checkSettings = checkSettingsBuilder.build();
        CheckResult checkResult;
        try {
            final CheckInformation checkInformation = factory.checkInformations().create(
                    document).withServerSideXmlExtraction(true).build();

            final Check check = connection.getCheckAdapter().check(checkSettings, checkInformation,
                    acrolinxFactory.documentCheckSettings().NULL());

            checkResult = check.getCheckResult();
            if (checkResult.hasAnnotatedXml()) {
                System.out.println(checkResult.getAnnotatedXmlUri());
            }
        } catch (final UserMetaDataIncompleteException e) {
            // dear user, please visit e.getUserMetadataEditUrl();
        } catch (final AuthorizationFailedException e) {
            // reopen the user / password dialog and get a new check adapter
        } catch (final InvalidCheckConfigurationException e) {
            // please verify your check settings
        } catch (final CheckFailedException e) {
            // sorry there was an error during the check
        }
</pre></div></div>
<div class="section">
<h3><a name="GUI_Layout_Example"></a>GUI Layout Example</h3>
<p>Here is an example of the check settings GUI in the Acrolinx batch checker:</p><img src="./images/checksettings_gui_example.JPG" alt="" />
<p>The following snippets explain how the UI relates to the settings in the API and how to get and set the possible settings:</p>
<ul>
<li>How to set and get the language <b>(1)</b>
<div class="source">
<pre>        Language language = null;
        for (final LanguageCapabilities lc : serverConnection.getCheckAdapter().getCapabilities().getLanguageCapabilities()) {
            System.out.println(lc.getLanguage().getLanguageCode());
            language = lc.getLanguage(); // normally let the user select
        }

        // select one language to get your check settings builder
        CheckSettingsBuilder settingBuilder = acrolinxFactory.checkSettings().create(language,
                RuleSets.newRuleSet(&quot;Demo&quot;));
</pre></div></li>
<li>How to set and get the rule set <b>(2)</b>
<div class="source">
<pre>        LanguageCapabilities capability = serverConnection.getCheckAdapter().getCapabilities().getLanguageCapability(
                language);

        RuleSet ruleSet = null;
        for (final RuleSetCapabilities rsc : capability.getRuleSetCapabilities()) {
            System.out.println(rsc.getRuleSet().getName());

            ruleSet = rsc.getRuleSet(); // normally let the user select
        }

        // select one language to get your check settings builder
        settingBuilder = acrolinxFactory.checkSettings().create(language, ruleSet);

</pre></div></li>
<li>Reuse Sentence Banks are not yet implemented <b>(3)</b></li>
<li>How to adjust your check settings GUI and pass the user-selected values to the Acrolinx Server <b>(4)</b> and how to activate term harvesting which is called &quot;New Terms&quot; in the clients <b>(5)</b>
<div class="source">
<pre>        capability = serverConnection.getCheckAdapter().getCapabilities().getLanguageCapability(language);
        RuleSetCapabilities ruleSetCapability = capability.getRuleSetCapability(ruleSet);

        // adjust your check options GUI
        if (ruleSetCapability.isGrammarCheckingAvailable()) {
            activateGrammarCheckBox();
        }

        settingBuilder = acrolinxFactory.checkSettings().create(language, ruleSet);
        final boolean valueFromGUI = false;
        final boolean newTermsValueFromGUI = false;
        settingBuilder.withGrammarChecking(valueFromGUI).withReuseChecking(valueFromGUI).withTermHarvesting(
                newTermsValueFromGUI);
</pre></div></li>
<li>How to adjust term settings GUI and pass the selected values to the Acrolinx Server (<b>6</b> + <b>7</b>)
<div class="source">
<pre>        capability = serverConnection.getCheckAdapter().getCapabilities().getLanguageCapability(language);
        ruleSetCapability = capability.getRuleSetCapability(ruleSet);

        // adjust your check options GUI
        if (ruleSetCapability.getAvailableTermSets().size() &gt; 0) {
            activateTerminologySection();
        }

        TermSet selectedTermSet = null;
        for (final TermSet ts : ruleSetCapability.getAvailableTermSets()) {
            System.out.println(&quot;add this term set to a list:&quot; + ts.getName());
            selectedTermSet = ts; // normally let the user select (one or multiple)
        }

        settingBuilder = acrolinxFactory.checkSettings().create(language, ruleSet);
        // normally let the user select
        final Set&lt;TermStatus&gt; termStatuus = Sets.newHashSet(TermStatus.ADMITTED, TermStatus.DEPRECATED);
        final Set&lt;TermSet&gt; termSets = Sets.newHashSet(selectedTermSet);
        settingBuilder.withTermChecking(termStatuus, termSets);

</pre></div></li></ul></div></div>

    <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
<img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
</a>

    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2011&#x2013;2016
                        <a href="http://www.acrolinx.com/">Acrolinx</a>.
            All rights reserved.

                  </div>
      <div class="clear">
        <hr/>
      </div>
      </div>
  </body>
</html>
